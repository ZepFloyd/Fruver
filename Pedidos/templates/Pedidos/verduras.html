{% extends "Home/base.html" %} <!-- hereda formato (header y footer en este caso) de template base.html -->
{% load static %}

{% block title %} Fruver - Verduras {% endblock title %}
{% block stylesheet %}
<link rel="stylesheet" href="{% static 'Pedidos/styles/verduras.css' %}"> <!-- referencia a la plantilla .css que corresponda -->
{% endblock stylesheet %}

{% block content %} <!-- agrega las sgtes. líneas de código dentro del bloque a la plantilla -->
    <h1>Verduras</h1>
    <section class="combobox" >
        <!-- lista desplegable para ordenar los productos-->
        <label for="ordenar">Elija cómo desea ver los productos:</label><br>
        <select name="ordenar" id="ordenar">
            <option value="1">Precio de menor a mayor</option>
            <option value="2">Precio de mayor a menor</option>
            <option value="3">Orden alfabético</option>
            <option value="4">Stock disponible</option>
        </select><br><br>
    </section>
    <section class="productoss" >
        <!-- iteramos sobre el diccionario que llega desde la view para acceder a los atributos de cada objeto Producto del tipo Fruta -->
        {% for verdura in verduras %}
            <div class="producto">
                <div class="box1">
                    <!-- Producto: nombre, precio, stock, categoría, descripción, botón para agregar al carrito -->
                    <img src="{{verdura.imagen_producto.url}}" alt={{verdura.nombre_producto}} width="250" height="250">
                    <h2>{{verdura.nombre_producto}}<br>1 {{verdura.modo_venta}}</h2> <!-- nombre y modo de venta -->
                </div>
                <div class="box2">
                    <h3></h3><!-- elemento vacío para centrar bien la columna -->
                    <h3>Precio:<br>${{verdura.precio_producto}}{% if verdura.modo_venta == 'Kg'%}/Kg{% elif verdura.modo_venta == 'Unidad'%}/unid.{% endif %}</h3>
                    <h3>Stock:<br>{{verdura.stock_producto}} {% if verdura.modo_venta == 'Kg'%}Kg{% elif verdura.modo_venta == 'Unidad'%}unid.{% endif %}</h3>
                    <h3>Categoría:<br>{{verdura.tipo_producto}}</h3>
                </div>
                <div class="box3">
                    <h3>Descripción:</h3>
                    <p>{{verdura.descripcion_producto}}</p>
                    <form action="{% url 'fruver-agregarproducto' verdura.id %}" method="POST">
                        {% csrf_token %}
                        <!-- input para aumentar o disminuir Kg/unidades -->
                        <label class="cantidad" for="cantidad">Indique la cantidad que desea (máx. {{verdura.stock_producto}}):</label><br>
                        <input type="number" name="cantidad" id="cantidad" value="1" min="1" max={{verdura.stock_producto}} width="1"><br>
                        <input type="hidden" value={{verdura.imagen_producto.url}} name="image">
                        <!-- Botón para agregar productos al carrito -->
                        <img src="{% static 'Home/images/navbar/cart.png' %}" alt="Carrito de compras" width="50" height="50"><br>
                        <button type="submit" class="addcart">Añadir al carrito</button>
                    </form>
                </div>
            </div>
        {% endfor %}
    </section>
{% endblock content %}

{% block messages %}
        {% for message in messages %}
            <script>
                Swal.fire({
                    "title": "{{message}}",
                    "text": "Para ver los productos en su carrito de compras, seleccione el ícono del carrito en la parte superior de la página.",
                    "icon": "success",
                    "confirmButtonColor": "green"
                })
            </script>
        {% endfor %}
{% endblock messages %}

<script type="text/javascript" src="{% static 'Pedidos/scripts/carrito.js' %}"></script>